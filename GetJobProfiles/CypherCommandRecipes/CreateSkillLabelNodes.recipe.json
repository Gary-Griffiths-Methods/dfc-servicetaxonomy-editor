{
    "name": "[token:recipeName]",
    "displayName": "[token:recipeName]",
    "description": "",
    "author": "",
    "website": "",
    "version": "",
    "issetuprecipe": false,
    "categories": "",
    "tags": [],
    "steps": [
        {
            "name": "CypherCommand",
            "commands": [
                "with 4 as hexLength\r\nmatch [token:occupationMatch](n:esco__Skill)[token:whereClause]\r\nwith distinct n, hexLength\r\nunwind n.skos__prefLabel as prefLabels\r\nwith n, prefLabels, hexLength, '0x' + right( n.uri, hexLength) as baseHexCode\r\nwith n, prefLabels, hexLength, baseHexCode, toLower(apoc.text.hexValue( apoc.convert.toInteger(baseHexCode))) as replacementChars, left(right( n.uri, 36),36 - hexLength) as trimmedUri, 0 as zero\r\nwith n, prefLabels, hexLength, replacementChars, baseHexCode, trimmedUri + case size(replacementChars) when hexLength then replacementChars when hexLength  / 2  then '0000' + replacementChars else 1/zero end as newUri\r\ncreate (l:SkillLabel:Resource {skos__prefLabel: prefLabels, uri: \"<<contentapiprefix>>/SkillLabel/\" + newUri})\r\ncreate (n)-[:hasPrefLabel]->(l)",
                "with 8 as hexLength\r\nmatch [token:occupationMatch](n:esco__Skill)[token:whereClause] \r\nwith distinct n, hexLength\r\nunwind n.skos__altLabel as altLabels\r\nwith n, altLabels, hexLength, '0x' + right(n.uri, hexLength) as baseHexCode\r\nwith n, altLabels, hexLength, baseHexCode, toLower(apoc.text.hexValue( apoc.convert.toInteger(baseHexCode) + apoc.coll.indexOf(n.skos__altLabel,altLabels) + 1 ) ) as replacementChars, left(right( n.uri, 36),36 - hexLength) as trimmedUri, 0 as zero\r\nwith n, altLabels, hexLength, replacementChars, baseHexCode, trimmedUri + case size(replacementChars) when hexLength then replacementChars when hexLength  / 2  then '0000' + replacementChars else 1/zero end as newUri\r\ncreate (l:SkillLabel:Resource {skos__prefLabel: altLabels, uri: \"<<contentapiprefix>>/SkillLabel/\" + newUri})\r\ncreate (n)-[:hasAltLabel]->(l)",
                "with 4 as hexLength, 500 as offset\r\nmatch [token:occupationMatch](n:esco__Skill)[token:whereClause]\r\nwith distinct n, hexLength, offset\r\nunwind n.skos__hiddenLabel as altLabels\r\nwith n, altLabels, hexLength, offset, '0x' + right( n.uri, hexLength) as baseHexCode\r\nwith n, altLabels, hexLength, baseHexCode, toLower(apoc.text.hexValue( apoc.convert.toInteger(baseHexCode) + apoc.coll.indexOf(n.skos__hiddenLabel,altLabels)  + offset) ) as replacementChars, left(right( n.uri, 36),36 - hexLength) as trimmedUri, 0 as zero\r\nwith n, altLabels, hexLength, replacementChars, baseHexCode, trimmedUri + case size(replacementChars) when hexLength then replacementChars else 1/zero end as newUri\r\ncreate (l:SkillLabel:Resource {skos__prefLabel: altLabels, uri: \"<<contentapiprefix>>/SkillLabel/\" + newUri})\r\ncreate (n)-[:hasHiddenLabel]->(l)"
            ]
        }
    ]
}
